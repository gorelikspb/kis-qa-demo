{% extends "base.html" %}

{% block title %}Termin erfassen - Mini-KIS QA Demo{% endblock %}

{% block content %}
<h2>Termin erfassen</h2>

<form method="POST">
    <div class="form-group">
        <label for="patient_id">Patient <span class="required">*</span></label>
        <select id="patient_id" name="patient_id" required>
            <option value="">-- Bitte wählen --</option>
            {% for patient in patients %}
                <option value="{{ patient.id }}" {% if patient_id == patient.id|string %}selected{% endif %}>
                    ID {{ patient.id }}: {{ patient.name }} ({{ patient.geburtsdatum }})
                </option>
            {% endfor %}
        </select>
        {% if not patients %}
            <small style="color: #e74c3c;">Keine Patienten vorhanden. Bitte zuerst einen Patienten anlegen.</small>
        {% endif %}
    </div>
    
    <div class="form-group">
        <label for="datum">Datum <span class="required">*</span></label>
        <input type="text" id="datum" name="datum" 
               value="{{ datum or '' }}" 
               placeholder="DD.MM.YYYY (z.B. 15.03.2024)" 
               required>
        <small style="color: #777; font-size: 12px;">Format: DD.MM.YYYY</small>
    </div>
    
    <div class="form-group">
        <label for="uhrzeit">Uhrzeit <span class="required">*</span></label>
        <input type="text" id="uhrzeit" name="uhrzeit" 
               value="{{ uhrzeit or '' }}" 
               placeholder="HH:MM (z.B. 14:30)" 
               required>
        <small style="color: #777; font-size: 12px;">Format: HH:MM</small>
    </div>
    
    <div class="form-group">
        <label for="arzt">Arzt <span class="required">*</span></label>
        <select id="arzt" name="arzt" required>
            <option value="">-- Bitte wählen --</option>
            {% for doctor in doctors %}
                <option value="{{ doctor }}" {% if arzt == doctor %}selected{% endif %}>
                    {{ doctor }}
                </option>
            {% endfor %}
        </select>
    </div>
    
    <div class="form-group">
        <label for="status">Status <span class="required">*</span></label>
        <select id="status" name="status" required>
            <option value="">-- Bitte wählen --</option>
            {% for status_opt in status_options %}
                <option value="{{ status_opt }}" {% if status == status_opt %}selected{% endif %}>
                    {{ status_opt }}
                </option>
            {% endfor %}
        </select>
    </div>
    
    <button type="submit" {% if not patients %}disabled{% endif %}>Termin speichern</button>
</form>
{% endblock %}


